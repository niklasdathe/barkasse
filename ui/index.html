<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Barkasse Hub</title>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
  <div id="bg"></div>

  <div id="hud">
    <header>
      <h1>SENSOR-HUB</h1>
      <div class="header-right">
        <span id="conn">connecting‚Ä¶</span>
        <button id="header-menu-btn" class="header-menu-btn" aria-label="Open menu" title="Menu">‚ãÆ</button>
      </div>
    </header>

    <!-- Topics: horizontal-only scroll -->
    <section id="topics-wrap" aria-label="Topics">
      <div id="topics" aria-live="polite" aria-label="Topics strip">
        <!-- Topic tiles are injected by app.js -->
      </div>
    </section>

    <!-- Two graphs (no add/remove, not draggable) -->
    <main id="graphs">
      <!-- Graph #1 -->
      <div id="graph-1" class="graph-tile" data-graph="true" aria-label="History graph 1 drop target">
        <div class="graph-header">
          <div class="chart-title">‚Äî</div>
          <div class="periods" role="group" aria-label="Chart period">
            <button data-p="1h" class="active">1h</button>
            <button data-p="1d">1d</button>
            <button data-p="max">max</button>
          </div>
        </div>
        <div class="graph-body">
          <canvas class="chart"></canvas>
          <div class="chart-hint">Drag a tile here to view its history</div>
        </div>
      </div>

      <!-- Graph #2 -->
      <div id="graph-2" class="graph-tile" data-graph="true" aria-label="History graph 2 drop target">
        <div class="graph-header">
          <div class="chart-title">‚Äî</div>
          <div class="periods" role="group" aria-label="Chart period">
            <button data-p="1h" class="active">1h</button>
            <button data-p="1d">1d</button>
            <button data-p="max">max</button>
          </div>
        </div>
        <div class="graph-body">
          <canvas class="chart"></canvas>
          <div class="chart-hint">Drag a tile here to view its history</div>
        </div>
      </div>
    </main>

    <!-- Utility drop target: ONLY trash -->
    <div class="utility-drops" role="group" aria-label="Tile actions">
      <div id="trash" class="drop-target trash" aria-label="Drop here to remove tile">üóëÔ∏è Drop to remove</div>
    </div>
  </div>

  <div id="manual-modal" class="modal-overlay" style="display:none;">
    <div class="modal">
      <div class="modal-header">
        <h2>Input Manual Value</h2>
        <button id="manual-close-btn" class="close-btn" aria-label="Close">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <div class="label-row">
            <label>Topic</label>
            <button id="manual-toggle-new" class="text-btn">Create New Topic</button>
          </div>
          
          <select id="manual-select-topic" class="input-lg"></select>
          
          <div id="manual-new-topic-wrap" style="display:none;" class="new-topic-grid">
             <input type="text" id="manual-node" class="input-lg" placeholder="Node (e.g. hub)" value="manual">
             <input type="text" id="manual-cluster" class="input-lg" placeholder="Cluster (e.g. kitchen)">
             <input type="text" id="manual-sensor" class="input-lg" placeholder="Sensor (e.g. temperature)">
          </div>
        </div>
        
        <div class="form-grid">
          <div class="form-group val-group">
            <label for="manual-value">Value</label>
            <input type="number" id="manual-value" class="input-lg" step="any" placeholder="0.00">
          </div>
          <div class="form-group unit-group">
             <label for="manual-unit">Unit</label>
             <input type="text" id="manual-unit" class="input-lg" placeholder="unit">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="manual-cancel-btn" class="btn">Cancel</button>
        <button id="manual-send-btn" class="btn primary-btn">Send Update</button>
      </div>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
